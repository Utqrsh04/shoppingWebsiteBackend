var Sib = require("sib-api-v3-sdk");

var client = Sib.ApiClient.instance;

var apiKey = client.authentications["api-key"];

apiKey.apiKey =
  "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";

const sendEmailToUser = (name, recieverEmail, authId) => {
  const tranEmailApi = new Sib.TransactionalEmailsApi();
  const sender = { email: " utkarshrkt2001@gmail.com " };
  const receivers = [
    {
      email: recieverEmail,
    },
  ];

  tranEmailApi
    .sendTransacEmail({
      sender,
      to: receivers,
      subject: "Verify your email",
      textContent: ` <html lang="en"> <head> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title></title> </head> <body> <div class=""> <div class="aHl"></div> <div id=":191" tabindex="-1"></div> <div id=":18s" class="ii gt" jslog="20277; u014N:xr6bB; 4:W251bGwsbnVsbCxbXV0."> <div id=":18r" class="a3s aiL msg3712660889258564014"> <u></u> <div bgcolor="#EAF0F6" style=" margin: 0 !important; padding: 0 !important; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; "> <div id="m_3712660889258564014preview_text" style=" display: none !important; font-size: 1px; color: #eaf0f6; line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden; "> Hi there! Kindly verify your email to continue shopping </div> <div style="background-color: #eaf0f6" bgcolor="#eaf0f6"> <table role="presentation" cellpadding="0" cellspacing="0" style=" border-spacing: 0 !important; border-collapse: collapse; margin: 0; padding: 0; width: 100% !important; min-width: 320px !important; height: 100% !important; " width="100%" height="100%"> <tbody> <tr> <td valign="top" style=" border-collapse: collapse; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; "> <div id="m_3712660889258564014hs_cos_wrapper_main" style=" color: inherit; font-size: inherit; line-height: inherit; "> <div id="m_3712660889258564014builtin_section-0" class="m_3712660889258564014hse-section" style=" padding-left: 10px; padding-right: 10px; padding-top: 20px; "> <div class="m_3712660889258564014hse-column-container" style=" min-width: 280px; max-width: 600px; width: 100%; margin-left: auto; margin-right: auto; border-collapse: collapse; border-spacing: 0; background-color: #eaf0f6; padding-bottom: 10px; padding-top: 10px; " bgcolor="#EAF0F6"> <div id="m_3712660889258564014builtin_column_0-0" class="m_3712660889258564014hse-column m_3712660889258564014hse-size-12"> </div> </div> </div> <div id="m_3712660889258564014builtin_section-1" class="m_3712660889258564014hse-section" style="padding-left: 10px; padding-right: 10px"> <div class="m_3712660889258564014hse-column-container" style=" min-width: 280px; max-width: 600px; width: 100%; margin-left: auto; margin-right: auto; border-collapse: collapse; border-spacing: 0; background-color: #ffffff; padding-top: 10px; " bgcolor="#ffffff"> <div id="m_3712660889258564014builtin_column_1-0" class="m_3712660889258564014hse-column m_3712660889258564014hse-size-12"> <div id="m_3712660889258564014hs_cos_wrapper_builtin_module_1_0_0" style=" color: inherit; font-size: inherit; line-height: inherit; "> <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style=" border-spacing: 0 !important; border-collapse: collapse; "> <tbody> <tr> <td align="center" valign="top" style=" border-collapse: collapse; font-family: Arial, sans-serif; color: #23496d; word-break: break-word; text-align: center; padding: 10px 20px; font-size: 0px; "> <a href="" style="color: #00a4bd" target="_blank"> <img alt="" src="https://acegif.com/wp-content/uploads/2021/4fh5wi/welcome-17.gif" style=" outline: none; text-decoration: none; border: none; max-width: 100%; font-size: 16px; " width="560" align="middle" class="CToWUd" data-bit="iit" /> </a> </td> </tr> </tbody> </table> </div> <table role="presentation" cellpadding="0" cellspacing="0" width="100%" style=" border-spacing: 0 !important; border-collapse: collapse; "> <tbody> <tr> <td class="m_3712660889258564014hs_padded" style=" border-collapse: collapse; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; padding: 10px 20px; "> <div id="m_3712660889258564014hs_cos_wrapper_module_16001945640932" style=" color: inherit; font-size: inherit; line-height: inherit; "> <div id="m_3712660889258564014hs_cos_wrapper_module_16001945640932_" style=" color: inherit; font-size: inherit; line-height: inherit; "> <h2 style=" margin: 0; line-height: 175%; font-size: 22px; "> <strong>Hey ${name} WelcomeÂ </strong> <strong><span style=" font-size: 17px; color: #23496d; "><img data-emoji="ðŸ™Œ" class="an1" alt="ðŸ™Œ" aria-label="ðŸ™Œ" src="https://fonts.gstatic.com/s/e/notoemoji/14.0/1f64c/72.png" loading="lazy" /> </span></strong></h2> <p style="line-height: 175%"> Â  </p> <p style="line-height: 175%"> Youâ€™re almost ready to start enjoying shoppers.com . Simply click the big red button below to <strong> verify your email address </strong> and be a part of awesome journey . </p> <ul style="line-height: 175%"></ul> </div> </div> </td> </tr> </tbody> </table> </div> </div> </div> <div id="m_3712660889258564014section_1600194957884" class="m_3712660889258564014hse-section" style="padding-left: 10px; padding-right: 10px"> <div class="m_3712660889258564014hse-column-container" style=" min-width: 280px; max-width: 600px; width: 100%; margin-left: auto; margin-right: auto; border-collapse: collapse; border-spacing: 0; background-color: #ffffff; " bgcolor="#ffffff"> <div id="m_3712660889258564014column_1600194957884_0" class="m_3712660889258564014hse-column m_3712660889258564014hse-size-12"> <table role="presentation" cellpadding="0" cellspacing="0" width="100%" style=" border-spacing: 0 !important; border-collapse: collapse; "> <tbody> <tr> <td class="m_3712660889258564014hs_padded" style=" border-collapse: collapse; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; padding: 0px 20px 30px; "> <div id="m_3712660889258564014hs_cos_wrapper_module_16002010395091" style=" color: inherit; font-size: inherit; line-height: inherit; "> <table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style=" border-spacing: 0 !important; border-collapse: separate !important; "> <tbody> <tr> <td align="center" valign="middle" bgcolor="#F0047F" role="presentation" style=" border-collapse: collapse; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; border-radius: 12px; background-color: #f0047f; "> <a href="http://localhost:5000/api/verify/${recieverEmail}&${authId}" style=" color: #00a4bd; font-size: 20px; font-family: Arial, sans-serif; margin: 0; text-transform: none; text-decoration: none; padding: 12px 18px; display: block; " target="_blank"> <strong style=" color: #ffffff; font-weight: bold; text-decoration: none; font-style: normal; ">Verify Email</strong> </a> </td> </tr> </tbody> </table> </div> </td> </tr> </tbody> </table> </div> </div> </div> <div id="m_3712660889258564014builtin_section-6" class="m_3712660889258564014hse-section" style=" padding-left: 10px; padding-right: 10px; padding-bottom: 20px; "> <div class="m_3712660889258564014hse-column-container" style=" min-width: 280px; max-width: 600px; width: 100%; margin-left: auto; margin-right: auto; border-collapse: collapse; border-spacing: 0; padding-top: 30px; "> <div id="m_3712660889258564014builtin_column_6-0" class="m_3712660889258564014hse-column m_3712660889258564014hse-size-12"> <table role="presentation" cellpadding="0" cellspacing="0" width="100%" style=" border-spacing: 0 !important; border-collapse: collapse; "> <tbody> <tr> <td class="m_3712660889258564014hs_padded" style=" border-collapse: collapse; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; padding: 10px 20px; "> <div id="m_3712660889258564014hs_cos_wrapper_builtin_module_6_0_0" style=" color: inherit; font-size: inherit; line-height: inherit; "> <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style=" border-spacing: 0 !important; border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; line-height: 135%; color: #23496d; margin-bottom: 0; padding: 0; "> <tbody> <tr> <td align="center" valign="top" style=" border-collapse: collapse; font-family: Arial, sans-serif; font-size: 15px; color: #23496d; word-break: break-word; text-align: center; margin-bottom: 0; line-height: 135%; padding: 10px 20px; "> <p style=" font-family: Arial, sans-serif; font-size: 12px; font-weight: normal; text-decoration: none; font-style: normal; color: #23496d; direction: lrt; " dir="lrt"> Netlify, 44 Montgomery Street, Suite 300, San Francisco, CA 94104 </p> <p> <a href="https://communications.netlify.com/hs/manage-preferences/unsubscribe?languagePreference=en&d=VndxF-6FH7k0VMmQRh3zgF3TW4pylHs3P3Q7wW3ZsjYm3_fNPsN8yLzJDmWFdlW4NGMvZ6KFRjZV25Ccv7ZVMqbN8N2sr7WP29BN8KZP2qXk_7QVbv-lH8xKcM9W61_sfz4kJfbxw5Wc5Y5ps42&v=3&utm_campaign=Event%20-%20Hosted%20-%20Jamstack%20Conf%202022&utm_source=hs_email&utm_medium=email&utm_content=225425845&_hsenc=p2ANqtz--FbKK-gb5douOm4xeL3U7BV7uA3YUuH4Ey6kMbSkc-2ODQ9IawteEJPmWkFDVFJLGCP9tPoOoD8Lx1sYJWKRGOiEdbrQ&_hsmi=225425845" style=" font-family: Helvetica, Arial, sans-serif; font-size: 12px; color: #00a4bd; font-weight: normal; text-decoration: underline; font-style: normal; " target="_blank">Manage preferences</a> </p> </td> </tr> </tbody> </table> </div> </td> </tr> </tbody> </table> </div> </div> </div> </div> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> </body> </html> `,
    })
    .then((res) => console.log(res))
    .catch((err) => console.log(err));
};

module.exports = { sendEmailToUser };
